<div class="container mt-4">
  <!-- Heading -->
  <div class="d-flex justify-content-between align-items-center">
    <div>
      <h1>Contact</h1>
    </div>
    <div>
      <button class="btn btn-primary btn-small" data-bs-toggle="modal" data-bs-target="#addContact">
        New
      </button>
    </div>
  </div>

  <div class="my-2">
    <% if (message.errorName || message.errorEmail || message.errorPhone) { %>
    <div
      class="alert alert-danger d-flex justify-content-between align-items-start w-100"
      role="alert"
    >
      <ul>
        <% if (message.errorName) { %>
          <li><%= message.errorName %></li>
        <% } %>

        <% if (message.errorEmail) { %>
          <li><%= message.errorEmail %></li>
        <% } %>
        
        <% if (message.errorPhone) { %>
          <li><%= message.errorPhone %></li>
        <% } %>
      </ul>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <% } %>
  </div>

  <!-- Contact list -->
  <% if(!data.length) { %>
  <p>Contact is empty</p>
  <% } else { %>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">Phone</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <% data.map((item,index)=>{ %>
      <tr>
        <th scope="row"><%= index + 1 %></th>
        <td><%= item.name %></td>
        <td><%= item.email %></td>
        <td><%= item.phone %></td>
        <td class="d-flex justify-content-end">
          <a href="/contact/<%= item.name %>/edit" class="btn btn-primary btn-sm">Edit</a>
          <form action="/contact/<%= item.name %>/delete" method="post">
            <button type="submit" class="btn btn-danger btn-sm ms-2">Delete</button>
          </form>
        </td>
      </tr>
      <% }) %>
    </tbody>
    <% } %>
  </table>
</div>

<!-- add contact modal -->
<%- include('components/modalAdd') %>
